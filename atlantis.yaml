version: 3
automerge: false
parallel_plan: true
parallel_apply: false

projects:
  - name: terraform-atlantis-workshop
    dir: terraform
    terraform_version: v1.6.0
    workspace: default
    
    # Automatic planning configuration
    autoplan:
      when_modified: ["*.tf", "*.tfvars", "*.tfvars.json", "*.hcl"]
      enabled: true
    
    # Apply requirements - enforces approval workflow
    apply_requirements: 
      - "approved"
      - "mergeable"

# Repository-level policies
policies:
  conftest_version: 0.25.0
  policy_sets:
    - name: workshop-policies
      path: policies/
      source: local
